import{r as s,B as w,e as y,c as n,o as r,b as t,m as _,t as I,d as b,g as c,v as z,y as F}from"./index-DvqxKvF9.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"image-upload"},U={class:"upload-label"},G={key:0,class:"image-preview"},M=["src","alt"],$={class:"image-overlay"},E={key:2,class:"upload-progress"},L={key:3,class:"upload-error"},T={__name:"ImageUpload",props:{label:{type:String,default:"Immagine"},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(p,{emit:k}){const B="https://bug-radio.onrender.com/api",v=p,g=k,i=s(null),o=s(v.modelValue),m=s(!1),l=s(""),u=s(!1);w(()=>v.modelValue,a=>{o.value=a});const C=()=>{i.value?.click()},V=a=>{const e=a.target.files?.[0];e&&f(e)},h=a=>{u.value=!1;const e=a.dataTransfer.files?.[0];e&&f(e)},f=async a=>{if(!a.type.startsWith("image/")){l.value="Per favore seleziona un'immagine";return}if(a.size>5*1024*1024){l.value="L'immagine deve essere inferiore a 5MB";return}l.value="",m.value=!0;try{const e=new FormData;e.append("image",a);const d=await F.post(`${B}/upload`,e,{headers:{"Content-Type":"multipart/form-data"}});o.value=d.data.url,g("update:modelValue",d.data.url)}catch(e){l.value=e.response?.data?.error||"Errore durante l'upload"}finally{m.value=!1}},D=()=>{o.value="",g("update:modelValue",""),l.value="",i.value&&(i.value.value="")};return(a,e)=>{const d=y("Button"),x=y("ProgressBar");return r(),n("div",S,[t("label",U,I(p.label),1),o.value?(r(),n("div",G,[t("img",{src:o.value,alt:p.label},null,8,M),t("div",$,[b(d,{icon:"pi pi-times",rounded:"",severity:"danger",size:"small",onClick:D,class:"remove-btn"})])])):(r(),n("div",{key:1,class:z(["upload-area",{"drag-over":u.value}]),onClick:C,onDrop:c(h,["prevent"]),onDragover:e[0]||(e[0]=c(P=>u.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=c(P=>u.value=!1,["prevent"]))},[e[2]||(e[2]=t("i",{class:"pi pi-cloud-upload upload-icon"},null,-1)),e[3]||(e[3]=t("p",{class:"upload-text"}," Clicca o trascina un'immagine qui ",-1)),e[4]||(e[4]=t("p",{class:"upload-hint"}," JPG, PNG, GIF, WebP (max 5MB) ",-1)),t("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:V,style:{display:"none"}},null,544)],34)),m.value?(r(),n("div",E,[b(x,{mode:"indeterminate",style:{height:"6px"}}),e[5]||(e[5]=t("p",null,"Caricamento in corso...",-1))])):_("",!0),l.value?(r(),n("small",L,I(l.value),1)):_("",!0)])}}},q=N(T,[["__scopeId","data-v-5e2d591b"]]);export{q as I};

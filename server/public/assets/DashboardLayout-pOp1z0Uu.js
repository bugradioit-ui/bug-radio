import{z as x,y as d,u as q,a as D,j as _,c as y,b as e,d as a,t as m,h,F as b,w as n,e as l,l as v,m as S,A as B,f as T,o as c}from"./index-DvqxKvF9.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const p="https://bug-radio.onrender.com/api",z=x("shows",{state:()=>({shows:[],currentShow:null,loading:!1,error:null}),getters:{activeShows:t=>t.shows.filter(s=>s.status==="active"),inactiveShows:t=>t.shows.filter(s=>s.status==="inactive"),featuredShows:t=>t.shows.filter(s=>s.featured),archivedShows:t=>t.shows.filter(s=>s.status==="archived"),showsCount:t=>t.shows.length,activeCount:t=>t.shows.filter(s=>s.status==="active").length,featuredCount:t=>t.shows.filter(s=>s.featured).length},actions:{async fetchShows(t={}){this.loading=!0,this.error=null;try{const s=new URLSearchParams(t),r=await d.get(`${p}/shows?${s}`);this.shows=r.data}catch(s){throw this.error=s.response?.data?.error||"Errore nel caricamento degli show",s}finally{this.loading=!1}},async fetchShowById(t){this.loading=!0,this.error=null;try{const s=await d.get(`${p}/shows/${t}`);return this.currentShow=s.data,s.data}catch(s){throw this.error=s.response?.data?.error||"Errore nel caricamento dello show",s}finally{this.loading=!1}},async createShow(t){this.loading=!0,this.error=null;try{const s=await d.post(`${p}/shows`,t);return this.shows.unshift(s.data),s.data}catch(s){throw this.error=s.response?.data?.error||"Errore nella creazione dello show",s}finally{this.loading=!1}},async updateShow(t,s){this.loading=!0,this.error=null;try{const r=await d.put(`${p}/shows/${t}`,s),u=this.shows.findIndex(w=>w._id===t);return u!==-1&&(this.shows[u]=r.data),r.data}catch(r){throw this.error=r.response?.data?.error||"Errore nell'aggiornamento dello show",r}finally{this.loading=!1}},async deleteShow(t){this.loading=!0,this.error=null;try{await d.delete(`${p}/shows/${t}`),this.shows=this.shows.filter(s=>s._id!==t)}catch(s){throw this.error=s.response?.data?.error||"Errore nell'eliminazione dello show",s}finally{this.loading=!1}}}}),M={class:"dashboard-layout"},N={class:"sidebar"},V={class:"sidebar-header"},j={class:"user-role"},F={class:"sidebar-menu"},P={class:"sidebar-footer"},G={class:"user-info"},H={class:"user-details"},J={class:"user-name"},K={class:"user-email"},O={class:"main-content"},Q={class:"topbar"},W={class:"topbar-left"},X={class:"topbar-right"},Y={class:"content"},Z={__name:"DashboardLayout",props:{pageTitle:{type:String,required:!0},breadcrumbItems:{type:Array,default:()=>[]}},setup(t){const s=T(),r=q(),u=z(),w=D(),k=_(()=>r.isAdmin?"Amministratore":"Artista"),A=_(()=>(r.user?.name||r.user?.email||"U").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2)),$=()=>{r.logout(),w.add({severity:"info",summary:"Logout effettuato",detail:"A presto!",life:2e3}),s.push("/login")};return(f,o)=>{const i=l("router-link"),I=l("Badge"),L=l("Avatar"),C=l("Button"),E=l("Breadcrumb"),R=l("Toast");return c(),y("div",M,[e("div",N,[e("div",V,[o[0]||(o[0]=e("i",{class:"pi pi-radio-button"},null,-1)),o[1]||(o[1]=e("h2",null,"BUG Radio",-1)),e("p",j,m(k.value),1)]),e("div",F,[h(r).isAdmin?(c(),y(b,{key:0},[a(i,{to:"/dashboard",class:"menu-item"},{default:n(()=>[...o[2]||(o[2]=[e("i",{class:"pi pi-home"},null,-1),e("span",null,"Dashboard",-1)])]),_:1}),a(i,{to:"/shows",class:"menu-item"},{default:n(()=>[...o[3]||(o[3]=[e("i",{class:"pi pi-microphone"},null,-1),e("span",null,"Shows",-1)])]),_:1}),a(i,{to:"/episodes",class:"menu-item"},{default:n(()=>[...o[4]||(o[4]=[e("i",{class:"pi pi-play-circle"},null,-1),e("span",null,"Episodi",-1)])]),_:1}),a(i,{to:"/requests",class:"menu-item"},{default:n(()=>[o[5]||(o[5]=e("i",{class:"pi pi-inbox"},null,-1)),o[6]||(o[6]=e("span",null,"Richieste",-1)),h(u).shows.filter(g=>g.requestStatus==="pending").length>0?(c(),v(I,{key:0,value:h(u).shows.filter(g=>g.requestStatus==="pending").length,severity:"warning"},null,8,["value"])):S("",!0)]),_:1})],64)):(c(),y(b,{key:1},[a(i,{to:"/dashboard",class:"menu-item"},{default:n(()=>[...o[7]||(o[7]=[e("i",{class:"pi pi-home"},null,-1),e("span",null,"Le Mie Richieste",-1)])]),_:1}),a(i,{to:"/my-shows",class:"menu-item"},{default:n(()=>[...o[8]||(o[8]=[e("i",{class:"pi pi-microphone"},null,-1),e("span",null,"I Miei Show",-1)])]),_:1}),a(i,{to:"/my-episodes",class:"menu-item"},{default:n(()=>[...o[9]||(o[9]=[e("i",{class:"pi pi-play-circle"},null,-1),e("span",null,"I Miei Episodi",-1)])]),_:1}),a(i,{to:"/new-request",class:"menu-item"},{default:n(()=>[...o[10]||(o[10]=[e("i",{class:"pi pi-plus-circle"},null,-1),e("span",null,"Richiedi Show",-1)])]),_:1})],64))]),e("div",P,[e("div",G,[a(L,{label:A.value,style:{"background-color":"#3b82f6",color:"white"},shape:"circle",size:"large"},null,8,["label"]),e("div",H,[e("p",J,m(h(r).user?.name),1),e("p",K,m(h(r).user?.email),1)])]),a(C,{label:"Logout",icon:"pi pi-sign-out",severity:"danger",outlined:"",class:"w-full",onClick:$})])]),e("div",O,[e("div",Q,[e("div",W,[e("h1",null,m(t.pageTitle),1),t.breadcrumbItems.length>0?(c(),v(E,{key:0,model:t.breadcrumbItems},null,8,["model"])):S("",!0)]),e("div",X,[B(f.$slots,"topbar-actions",{},void 0,!0)])]),e("div",Y,[B(f.$slots,"default",{},void 0,!0)])]),a(R)])}}},ts=U(Z,[["__scopeId","data-v-875e700d"]]);export{ts as D,z as u};

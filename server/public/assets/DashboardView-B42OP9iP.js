import{a as V,j as v,k as B,l as f,w as a,f as $,e as d,o as g,b as o,d as s,m as T,t as l,h as A,i as u}from"./index-DvqxKvF9.js";import{u as O,D as U}from"./DashboardLayout-pOp1z0Uu.js";import{u as x}from"./episodes-B4waFnAc.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"stats-grid"},N={class:"stat-content"},P={class:"stat-info"},j={class:"stat-content"},G={class:"stat-info"},Z={class:"stat-content"},F={class:"stat-info"},H={class:"stat-content"},M={class:"stat-info"},J={class:"quick-actions"},K={__name:"DashboardView",setup(Q){$();const p=O(),m=x(),C=V(),h=v(()=>p.shows.filter(e=>e.requestStatus==="pending").length),D=v(()=>p.shows.filter(e=>e.status==="active").length),w=v(()=>p.shows.filter(e=>e.requestStatus==="pending").slice(0,5)),y=v(()=>m.episodes.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,5)),R=e=>({pending:"IN ATTESA",approved:"APPROVATO",rejected:"RIFIUTATO"})[e]||e?.toUpperCase(),k=e=>({pending:"warning",approved:"success",rejected:"danger"})[e]||"info",q=e=>({draft:"BOZZA",published:"PUBBLICATO",archived:"ARCHIVIATO"})[e]||e?.toUpperCase(),I=e=>({draft:"secondary",published:"success",archived:"warning"})[e]||"info",S=e=>e?new Date(e).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"-";return B(async()=>{try{await Promise.all([p.fetchShows(),m.fetchEpisodes()])}catch{C.add({severity:"error",summary:"Errore",detail:"Errore nel caricamento dei dati",life:3e3})}}),(e,t)=>{const r=d("Card"),c=d("Button"),n=d("Column"),_=d("Tag"),b=d("DataTable"),E=d("Toast");return g(),f(U,{"page-title":"Dashboard Amministratore"},{default:a(()=>[o("div",L,[s(r,{class:"stat-card"},{content:a(()=>[o("div",N,[o("div",P,[t[4]||(t[4]=o("h3",null,"Show Totali",-1)),o("p",null,l(A(p).shows.length),1)]),t[5]||(t[5]=o("i",{class:"pi pi-microphone stat-icon"},null,-1))])]),_:1}),s(r,{class:"stat-card pending"},{content:a(()=>[o("div",j,[o("div",G,[t[6]||(t[6]=o("h3",null,"Richieste Pending",-1)),o("p",null,l(h.value),1)]),t[7]||(t[7]=o("i",{class:"pi pi-clock stat-icon"},null,-1))])]),_:1}),s(r,{class:"stat-card approved"},{content:a(()=>[o("div",Z,[o("div",F,[t[8]||(t[8]=o("h3",null,"Show Attivi",-1)),o("p",null,l(D.value),1)]),t[9]||(t[9]=o("i",{class:"pi pi-check-circle stat-icon"},null,-1))])]),_:1}),s(r,{class:"stat-card episodes"},{content:a(()=>[o("div",H,[o("div",M,[t[10]||(t[10]=o("h3",null,"Episodi Totali",-1)),o("p",null,l(A(m).episodes.length),1)]),t[11]||(t[11]=o("i",{class:"pi pi-play-circle stat-icon"},null,-1))])]),_:1})]),s(r,{class:"actions-card"},{title:a(()=>[...t[12]||(t[12]=[u("Azioni Rapide",-1)])]),content:a(()=>[o("div",J,[s(c,{label:"Gestisci Show",icon:"pi pi-microphone",onClick:t[0]||(t[0]=i=>e.$router.push("/shows")),size:"large"}),s(c,{label:"Gestisci Episodi",icon:"pi pi-play-circle",severity:"secondary",onClick:t[1]||(t[1]=i=>e.$router.push("/episodes")),size:"large"}),s(c,{label:"Richieste Pending",icon:"pi pi-inbox",severity:"warning",onClick:t[2]||(t[2]=i=>e.$router.push("/requests")),size:"large",badge:h.value>0?h.value.toString():void 0},null,8,["badge"])])]),_:1}),w.value.length>0?(g(),f(r,{key:0},{title:a(()=>[...t[13]||(t[13]=[u("Ultime Richieste",-1)])]),content:a(()=>[s(b,{value:w.value,stripedRows:""},{default:a(()=>[s(n,{field:"title",header:"Titolo Show",style:{"min-width":"200px"}}),s(n,{field:"artist.name",header:"Artista"}),s(n,{field:"requestStatus",header:"Status"},{body:a(i=>[s(_,{value:R(i.data.requestStatus),severity:k(i.data.requestStatus)},null,8,["value","severity"])]),_:1}),s(n,{field:"createdAt",header:"Data Richiesta"},{body:a(i=>[u(l(S(i.data.createdAt)),1)]),_:1}),s(n,{header:"Azioni"},{body:a(i=>[s(c,{label:"Vedi",icon:"pi pi-arrow-right",text:"",onClick:t[3]||(t[3]=W=>e.$router.push("/requests"))})]),_:1})]),_:1},8,["value"])]),_:1})):T("",!0),y.value.length>0?(g(),f(r,{key:1},{title:a(()=>[...t[14]||(t[14]=[u("Ultimi Episodi",-1)])]),content:a(()=>[s(b,{value:y.value,stripedRows:""},{default:a(()=>[s(n,{field:"title",header:"Titolo",style:{"min-width":"200px"}}),s(n,{field:"showId.title",header:"Show"},{body:a(i=>[u(l(i.data.showId?.title||"-"),1)]),_:1}),s(n,{field:"status",header:"Status"},{body:a(i=>[s(_,{value:q(i.data.status),severity:I(i.data.status)},null,8,["value","severity"])]),_:1}),s(n,{field:"airDate",header:"Data"},{body:a(i=>[u(l(S(i.data.airDate)),1)]),_:1})]),_:1},8,["value"])]),_:1})):T("",!0),s(E)]),_:1})}}},st=z(K,[["__scopeId","data-v-e102da00"]]);export{st as default};

import{z as d,y as t}from"./index-CCGy0HCw.js";const o="https://bug-radio.onrender.com/",l=d("episodes",{state:()=>({episodes:[],currentEpisode:null,loading:!1,error:null}),getters:{publishedEpisodes:s=>s.episodes.filter(e=>e.status==="published"),draftEpisodes:s=>s.episodes.filter(e=>e.status==="draft"),featuredEpisodes:s=>s.episodes.filter(e=>e.featured),episodesByShow:s=>e=>s.episodes.filter(r=>r.showId._id===e||r.showId===e)},actions:{async fetchEpisodes(s={}){this.loading=!0,this.error=null;try{const e=new URLSearchParams(s),r=await t.get(`${o}/episodes?${e}`);return this.episodes=r.data,r.data}catch(e){throw this.error=e.response?.data?.error||"Errore nel caricamento degli episodi",e}finally{this.loading=!1}},async fetchEpisodeById(s){this.loading=!0,this.error=null;try{const e=await t.get(`${o}/episodes/${s}`);return this.currentEpisode=e.data,e.data}catch(e){throw this.error=e.response?.data?.error||"Errore nel caricamento dell'episodio",e}finally{this.loading=!1}},async createEpisode(s){this.loading=!0,this.error=null;try{const e=await t.post(`${o}/episodes`,s);return this.episodes.unshift(e.data),e.data}catch(e){throw this.error=e.response?.data?.error||"Errore nella creazione dell'episodio",e}finally{this.loading=!1}},async updateEpisode(s,e){this.loading=!0,this.error=null;try{const r=await t.put(`${o}/episodes/${s}`,e),i=this.episodes.findIndex(a=>a._id===s);return i!==-1&&(this.episodes[i]=r.data),r.data}catch(r){throw this.error=r.response?.data?.error||"Errore nell'aggiornamento dell'episodio",r}finally{this.loading=!1}},async deleteEpisode(s){this.loading=!0,this.error=null;try{await t.delete(`${o}/episodes/${s}`),this.episodes=this.episodes.filter(e=>e._id!==s)}catch(e){throw this.error=e.response?.data?.error||"Errore nell'eliminazione dell'episodio",e}finally{this.loading=!1}}}});export{l as u};

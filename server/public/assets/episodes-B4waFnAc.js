import{z as d,y as t}from"./index-DvqxKvF9.js";const o="https://bug-radio.onrender.com/api",l=d("episodes",{state:()=>({episodes:[],currentEpisode:null,loading:!1,error:null}),getters:{publishedEpisodes(){return Array.isArray(this.episodes)?this.episodes.filter(r=>r.status==="published"):[]},draftEpisodes(){return Array.isArray(this.episodes)?this.episodes.filter(r=>r.status==="draft"):[]},featuredEpisodes(){return Array.isArray(this.episodes)?this.episodes.filter(r=>r.featured):[]}},actions:{async fetchEpisodes(r={}){this.loading=!0,this.error=null,console.log("Filters:",r);try{const e=new URLSearchParams(r);console.log("Params:",e);const s=await t.get(`${o}/episodes/${e}`);return this.episodes=s.data,console.log(s),s.data}catch(e){throw this.error=e.response?.data?.error||"Errore nel caricamento degli episodi",e}finally{this.loading=!1}},async fetchEpisodeById(r){this.loading=!0,this.error=null;try{const e=await t.get(`${o}/episodes/${r}`);return this.currentEpisode=e.data,e.data}catch(e){throw this.error=e.response?.data?.error||"Errore nel caricamento dell'episodio",e}finally{this.loading=!1}},async createEpisode(r){this.loading=!0,this.error=null;try{const e=await t.post(`${o}/episodes`,r);return this.episodes.unshift(e.data),e.data}catch(e){throw this.error=e.response?.data?.error||"Errore nella creazione dell'episodio",e}finally{this.loading=!1}},async updateEpisode(r,e){this.loading=!0,this.error=null;try{const s=await t.put(`${o}/episodes/${r}`,e),i=this.episodes.findIndex(a=>a._id===r);return i!==-1&&(this.episodes[i]=s.data),s.data}catch(s){throw this.error=s.response?.data?.error||"Errore nell'aggiornamento dell'episodio",s}finally{this.loading=!1}},async deleteEpisode(r){this.loading=!0,this.error=null;try{await t.delete(`${o}/episodes/${r}`),this.episodes=this.episodes.filter(e=>e._id!==r)}catch(e){throw this.error=e.response?.data?.error||"Errore nell'eliminazione dell'episodio",e}finally{this.loading=!1}}}});export{l as u};

import{u as j}from"./artist-CpiDAERt.js";import{a as V,r as D,j as $,k as M,l as b,w as a,e as g,p as O,o as n,c as d,d as l,h as m,b as s,F as R,m as v,t as i,i as u,q as E,x as G,v as F}from"./index-DvqxKvF9.js";import{D as U}from"./DashboardLayout-pOp1z0Uu.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"empty-state-large"},J={class:"stats-grid"},K={class:"stat-content"},P={class:"stat-info"},Q={class:"stat-content"},X={class:"stat-info"},Y={class:"stat-content"},Z={class:"stat-info"},tt={class:"stat-content"},st={class:"stat-info"},et={class:"message-content"},lt={class:"card-title-actions"},it={class:"genres-tags"},ot={key:0,class:"more-genres"},nt={key:0,class:"details-content"},at={key:0,class:"detail-section"},rt={class:"image-preview-detail"},ut=["src","alt"],dt={class:"detail-section"},pt={class:"description-text"},vt={key:0},mt={class:"detail-section"},gt={key:0,style:{"margin-bottom":"1rem"}},ct=["src","alt"],yt={class:"description-text"},ft={key:1,style:{"margin-top":"1rem"}},kt={class:"social-links"},bt=["href"],_t=["href"],St=["href"],ht={class:"detail-section"},wt={key:1,class:"detail-section"},Ct={key:0,class:"admin-notes"},Dt={key:1,class:"no-notes"},Rt={class:"detail-section"},qt={__name:"DashboardView",setup(Tt){const p=j(),q=V(),k=D(!1),e=D(null),T=$(()=>p.myRequests.filter(o=>o.requestStatus==="rejected").length),w=o=>({pending:"IN ATTESA",approved:"APPROVATO âœ“",rejected:"RIFIUTATO"})[o]||o,C=o=>({pending:"warning",approved:"success",rejected:"danger"})[o]||"info",_=o=>o?new Date(o).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",A=o=>{const t=o.artist?.socialLinks;return t&&(t.instagram||t.soundcloud||t.mixcloud)},x=o=>{e.value=o,k.value=!0};return M(async()=>{try{await p.fetchMyRequests()}catch{q.add({severity:"error",summary:"Errore",detail:"Errore nel caricamento delle richieste",life:3e3})}}),(o,t)=>{const f=g("Button"),c=g("Card"),L=g("Message"),y=g("Column"),S=g("Tag"),N=g("DataTable"),z=g("Dialog"),I=g("Toast"),B=O("tooltip");return n(),b(U,{"page-title":"Le Mie Richieste Show"},{"topbar-actions":a(()=>[l(f,{label:"Nuova Richiesta",icon:"pi pi-plus",onClick:t[0]||(t[0]=r=>o.$router.push("/artist/request"))})]),default:a(()=>[m(p).myRequests.length===0?(n(),b(c,{key:0,class:"welcome-card"},{content:a(()=>[s("div",W,[t[5]||(t[5]=s("i",{class:"pi pi-microphone",style:{"font-size":"4rem",color:"#cbd5e1"}},null,-1)),t[6]||(t[6]=s("h2",null,"Benvenuto su BUG Radio! ðŸŽµ",-1)),t[7]||(t[7]=s("p",null,"Non hai ancora richiesto nessuno show.",-1)),t[8]||(t[8]=s("p",null,"Clicca il pulsante qui sotto per proporre il tuo programma!",-1)),l(f,{label:"Richiedi il Tuo Show",icon:"pi pi-plus",size:"large",onClick:t[1]||(t[1]=r=>o.$router.push("/artist/request")),class:"cta-button"})])]),_:1})):(n(),d(R,{key:1},[s("div",J,[l(c,{class:"stat-card"},{content:a(()=>[s("div",K,[s("div",P,[t[9]||(t[9]=s("h3",null,"Richieste Totali",-1)),s("p",null,i(m(p).myRequests.length),1)]),t[10]||(t[10]=s("i",{class:"pi pi-list stat-icon"},null,-1))])]),_:1}),l(c,{class:"stat-card pending"},{content:a(()=>[s("div",Q,[s("div",X,[t[11]||(t[11]=s("h3",null,"In Attesa",-1)),s("p",null,i(m(p).pendingCount),1)]),t[12]||(t[12]=s("i",{class:"pi pi-clock stat-icon"},null,-1))])]),_:1}),l(c,{class:"stat-card approved"},{content:a(()=>[s("div",Y,[s("div",Z,[t[13]||(t[13]=s("h3",null,"Approvati",-1)),s("p",null,i(m(p).approvedCount),1)]),t[14]||(t[14]=s("i",{class:"pi pi-check-circle stat-icon"},null,-1))])]),_:1}),l(c,{class:"stat-card rejected"},{content:a(()=>[s("div",tt,[s("div",st,[t[15]||(t[15]=s("h3",null,"Rifiutati",-1)),s("p",null,i(T.value),1)]),t[16]||(t[16]=s("i",{class:"pi pi-times-circle stat-icon"},null,-1))])]),_:1})]),m(p).approvedCount>0?(n(),b(L,{key:0,severity:"success",closable:!1,class:"info-message"},{default:a(()=>[s("div",et,[t[20]||(t[20]=s("i",{class:"pi pi-check-circle"},null,-1)),s("div",null,[t[17]||(t[17]=s("strong",null,"Congratulazioni!",-1)),u(" Hai "+i(m(p).approvedCount)+" show "+i(m(p).approvedCount===1?"approvato":"approvati")+". ",1),t[18]||(t[18]=s("br",null,null,-1)),t[19]||(t[19]=u(" Gli episodi verranno gestiti e pubblicati dall'admin. ",-1))])])]),_:1})):v("",!0),l(c,null,{title:a(()=>[s("div",lt,[t[21]||(t[21]=s("span",null,"I Miei Show",-1)),l(f,{label:"Nuova Richiesta",icon:"pi pi-plus",size:"small",onClick:t[2]||(t[2]=r=>o.$router.push("/artist/request"))})])]),content:a(()=>[l(N,{value:m(p).myRequests,loading:m(p).loading,paginator:"",rows:10,stripedRows:"",sortField:"createdAt",sortOrder:-1},{default:a(()=>[l(y,{field:"title",header:"Titolo Show",sortable:"",style:{"min-width":"200px"}}),l(y,{field:"artist.name",header:"Nome Artista",sortable:""}),l(y,{field:"genres",header:"Generi"},{body:a(r=>[s("div",it,[(n(!0),d(R,null,E(r.data.genres?.slice(0,2),h=>(n(),b(S,{key:h,value:h,severity:"info",class:"genre-tag"},null,8,["value"]))),128)),r.data.genres?.length>2?(n(),d("span",ot," +"+i(r.data.genres.length-2),1)):v("",!0)])]),_:1}),l(y,{field:"requestStatus",header:"Status",sortable:""},{body:a(r=>[l(S,{value:w(r.data.requestStatus),severity:C(r.data.requestStatus)},null,8,["value","severity"])]),_:1}),l(y,{field:"createdAt",header:"Data Richiesta",sortable:""},{body:a(r=>[u(i(_(r.data.createdAt)),1)]),_:1}),l(y,{header:"Azioni",style:{width:"120px"}},{body:a(r=>[G(l(f,{icon:"pi pi-eye",rounded:"",outlined:"",severity:"info",onClick:h=>x(r.data)},null,8,["onClick"]),[[B,"Dettagli",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","loading"])]),_:1})],64)),l(z,{visible:k.value,"onUpdate:visible":t[4]||(t[4]=r=>k.value=r),header:"Dettagli Richiesta Show",modal:!0,style:{width:"700px"},maximizable:!0},{footer:a(()=>[l(f,{label:"Chiudi",onClick:t[3]||(t[3]=r=>k.value=!1)})]),default:a(()=>[e.value?(n(),d("div",nt,[s("div",{class:F(["status-banner","status-"+e.value.requestStatus])},[l(S,{value:w(e.value.requestStatus),severity:C(e.value.requestStatus),style:{"font-size":"1.1rem",padding:"0.5rem 1rem"}},null,8,["value","severity"])],2),e.value.image?.url?(n(),d("div",at,[t[22]||(t[22]=s("h3",null,"ðŸ“» Immagine Show",-1)),s("div",rt,[s("img",{src:e.value.image.url,alt:e.value.title},null,8,ut)])])):v("",!0),s("div",dt,[t[26]||(t[26]=s("h3",null,"Informazioni Show",-1)),s("p",null,[t[23]||(t[23]=s("strong",null,"Titolo:",-1)),u(" "+i(e.value.title),1)]),t[27]||(t[27]=s("p",null,[s("strong",null,"Descrizione:")],-1)),s("p",pt,i(e.value.description),1),s("p",null,[t[24]||(t[24]=s("strong",null,"Generi:",-1)),u(" "+i(e.value.genres?.join(", ")),1)]),e.value.tags?.length?(n(),d("p",vt,[t[25]||(t[25]=s("strong",null,"Tags:",-1)),u(" "+i(e.value.tags.join(", ")),1)])):v("",!0)]),s("div",mt,[t[34]||(t[34]=s("h3",null,"Artista",-1)),e.value.artist?.photo?(n(),d("div",gt,[s("img",{src:e.value.artist.photo,alt:e.value.artist.name,class:"artist-photo"},null,8,ct)])):v("",!0),s("p",null,[t[28]||(t[28]=s("strong",null,"Nome:",-1)),u(" "+i(e.value.artist.name),1)]),s("p",null,[t[29]||(t[29]=s("strong",null,"Email:",-1)),u(" "+i(e.value.artist.email),1)]),t[35]||(t[35]=s("p",null,[s("strong",null,"Bio:")],-1)),s("p",yt,i(e.value.artist.bio),1),A(e.value)?(n(),d("div",ft,[t[33]||(t[33]=s("p",null,[s("strong",null,"Social:")],-1)),s("div",kt,[e.value.artist.socialLinks?.instagram?(n(),d("a",{key:0,href:e.value.artist.socialLinks.instagram,target:"_blank"},[...t[30]||(t[30]=[s("i",{class:"pi pi-instagram"},null,-1),u(" Instagram ",-1)])],8,bt)):v("",!0),e.value.artist.socialLinks?.soundcloud?(n(),d("a",{key:1,href:e.value.artist.socialLinks.soundcloud,target:"_blank"},[...t[31]||(t[31]=[s("i",{class:"pi pi-cloud"},null,-1),u(" Soundcloud ",-1)])],8,_t)):v("",!0),e.value.artist.socialLinks?.mixcloud?(n(),d("a",{key:2,href:e.value.artist.socialLinks.mixcloud,target:"_blank"},[...t[32]||(t[32]=[s("i",{class:"pi pi-cloud"},null,-1),u(" Mixcloud ",-1)])],8,St)):v("",!0)])])):v("",!0)]),s("div",ht,[t[38]||(t[38]=s("h3",null,"ðŸ“… Programmazione",-1)),s("p",null,[t[36]||(t[36]=s("strong",null,"Giorno:",-1)),u(" "+i(e.value.schedule.dayOfWeek),1)]),s("p",null,[t[37]||(t[37]=s("strong",null,"Orario:",-1)),u(" "+i(e.value.schedule.timeSlot),1)])]),e.value.requestStatus!=="pending"?(n(),d("div",wt,[t[39]||(t[39]=s("h3",null,"ðŸ’¬ Risposta Admin",-1)),e.value.adminNotes?(n(),d("p",Ct,i(e.value.adminNotes),1)):(n(),d("p",Dt,"Nessuna nota dall'admin"))])):v("",!0),s("div",Rt,[t[42]||(t[42]=s("h3",null,"ðŸ“Š Info",-1)),s("p",null,[t[40]||(t[40]=s("strong",null,"Data Richiesta:",-1)),u(" "+i(_(e.value.createdAt)),1)]),s("p",null,[t[41]||(t[41]=s("strong",null,"Ultimo Aggiornamento:",-1)),u(" "+i(_(e.value.updatedAt)),1)])])])):v("",!0)]),_:1},8,["visible"]),l(I)]),_:1})}}},zt=H(qt,[["__scopeId","data-v-4aab6ba5"]]);export{zt as default};
